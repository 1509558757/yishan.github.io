---
title: 多线程之阻塞队列
date: 2021-01-13 19:13:00
tags: [java基础,多线程]
---

### 阻塞队列

<!--more-->

```java
package com.yishan.queue;

import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

/**
 * 阻塞队列
 * @author : yishan
 * @date : 2021-01-13 19:03
 */
public class Test01 {
    public static void main(String[] args) throws InterruptedException {
        //ArrayBlockingQueue 底层是数组，有界
        //LinkedBlockingQueue 底层是链表，无界，但不是真正的无界，int的最大值
        //创建阻塞队列，容量为1
        ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(1);
        //存元素
        arrayBlockingQueue.put("壹亿壹");
        //取元素，如果没有取到元素，一直等着，程序不会终止
        System.out.println(arrayBlockingQueue.take());
        System.out.println(arrayBlockingQueue.take());
        System.out.println("程序结束！");

    }
}
```



### 阻塞队列实现等待唤醒机制

```java
package com.yishan.queue;

import java.util.concurrent.ArrayBlockingQueue;

/**
 * @author : yishan
 * @date : 2021-01-13 19:19
 */
public class Cooker extends Thread{

    private ArrayBlockingQueue<String> arrayBlockingQueue;
    public Cooker(ArrayBlockingQueue<String> arrayBlockingQueue) {
        this.arrayBlockingQueue = arrayBlockingQueue;
    }

    @Override
    public void run() {
        while (true) {
            try {
                arrayBlockingQueue.put("汉堡包");
                System.out.println("厨师放了一个汉堡包");
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
```



```java
package com.yishan.queue;

import java.util.concurrent.ArrayBlockingQueue;

/**
 * @author : yishan
 * @date : 2021-01-13 19:19
 */
public class Foodie extends Thread {
    private ArrayBlockingQueue<String> arrayBlockingQueue;

    public Foodie(ArrayBlockingQueue<String> arrayBlockingQueue) {
        this.arrayBlockingQueue = arrayBlockingQueue;
    }

    @Override
    public void run() {
        try {
           String take = arrayBlockingQueue.take();
            System.out.println("吃货获取了一个" + take);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
```



```java
package com.yishan.queue;

import java.util.concurrent.ArrayBlockingQueue;

/**
 * @author : yishan
 * @date : 2021-01-13 19:18
 */
public class DemoMain {
    public static void main(String[] args) {
        //创建阻塞队列
        ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(1);

        Cooker cooker = new Cooker(arrayBlockingQueue);
        Foodie foodie = new Foodie(arrayBlockingQueue);

        cooker.start();
        foodie.start();

    }
}
```